<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Motor Control Documentation &#8212; Motor Control  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Motor Control’s Documentation!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="motor-control-documentation">
<h1>Motor Control Documentation<a class="headerlink" href="#motor-control-documentation" title="Permalink to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="motor_control.MotorControl">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">motor_control.</span></span><span class="sig-name descname"><span class="pre">MotorControl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kit_address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor method for the motor controller object:</p>
<p>This method initializes the motor controller object with the
provided kit addresses and motor IDs. It also sets up the initial
positions, antenna numbers, and motor coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kit_address</strong> (<em>list</em><em>, </em><em>optional</em>) – List of kit addresses (default: None).</p></li>
<li><p><strong>motor_id</strong> (<em>list</em><em>, </em><em>optional</em>) – List of motor IDs (default: None).</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">(</span><span class="n">kit_address</span><span class="o">=</span><span class="p">[</span><span class="mh">0x60</span><span class="p">,</span> <span class="mh">0x61</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>                   <span class="n">motor_id</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If <cite>kit_address</cite> is not provided, it is set to the default
addresses [0x60, 0x61, 0x62, 0x63].</p></li>
<li><p>If <cite>motor_id</cite> is not provided, it is set to the default IDs
[[0, 0], [0, 1], [1, 0], [1, 1], [2, 0], [2, 1], [3, 0], [3, 1]].</p></li>
<li><p>The <cite>kit_address</cite> and <cite>motor_id</cite> parameters are used to keep track
of the hats and motors.</p></li>
<li><p>The initial motor positions are set to the maximum value defined
by <cite>DRIVERS_MAX</cite>.</p></li>
<li><p>The <cite>_antenna_number</cite> sets the numbering that we have set
to the lab</p></li>
<li><p>The antenna numbers and motor coordinates are initialized based on
the kit addresses and motor IDs.</p></li>
<li><p>The GPIO pin for the switch is set up.</p></li>
</ul>
</div>
<p>Destructor method for the motor controller object:</p>
<p>This method is called when the object is being destroyed. It releases
all the motors and cleans up the GPIO pins if Raspberry Pi libraries
are available.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">obj</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>This method is automatically called by the Python interpreter and
should not be called directly.</p></li>
<li><p>It releases all the motors by calling the <cite>release_all</cite> method.</p></li>
<li><p>If Raspberry Pi libraries are available, it also cleans up the
GPIO pins using <cite>GPIO.cleanup</cite>.</p></li>
</ul>
</div>
<p>Representation method for the motor controller object:</p>
<p>Returns a string representation of the motor controller object.</p>
<p>This method returns a string that contains information about the motors,
including their numbering, addresses, positions, and coordinates.
If the system is not initialized, it indicates that positions are not
available before initialization.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A string representation of the motor controller object.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="go">Motor: 0</span>
<span class="go">Numbering: 2</span>
<span class="go">Address: 0x61</span>
<span class="go">Stepper: 1</span>
<span class="go">Position: 100 mm</span>
<span class="go">Coordinates: (10.0, 20.0)</span>
<span class="go">--------------</span>
<span class="go">Motor: 1</span>
<span class="go">Numbering: 3</span>
<span class="go">Address: 0x61</span>
<span class="go">Stepper: 1</span>
<span class="go">Position: 200 mm</span>
<span class="go">Coordinates: (15.0, 25.0)</span>
<span class="go">--------------</span>
<span class="go">...</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.backward">
<span class="sig-name descname"><span class="pre">backward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_motor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.backward" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves the specified stepper motor one step backward.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>num_motor</strong> (<em>int</em>) – The index of the stepper motor to be moved.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The new position of the antenna is updated with respect to
the number of steps taken.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.check_pin">
<span class="sig-name descname"><span class="pre">check_pin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.check_pin" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the status of a pin switch.</p>
<p>If the pin switch is OFF, it prints “switch is OFF”.
If the pin switch is STILL ON, it prints “switch is STILL ON”,
terminates the program, and exits.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">check_pin</span><span class="p">()</span>
<span class="go">switch is OFF</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.check_pin_stable">
<span class="sig-name descname"><span class="pre">check_pin_stable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.check_pin_stable" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the pin state is stable.</p>
<p>This function monitors the state of a GPIO pin, and prints messages
indicating the state  of the pin at two different points in time.
It also issues a warning if the pin state  is not stable,
suggesting to initialize the antennas until the warning does not
appear.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>UserWarning</strong> – If the state of the GPIO pin is unstable.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="motor_control.MotorControl.coordinates">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">coordinates</span></span><a class="headerlink" href="#motor_control.MotorControl.coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>The ‘coordinates’ property getter.</p>
<p>This property represents the coordinates of the antenna in the
object. The getter method for this property returns the current
coordinates of the antenna.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list or tuple representing the antenna
coordinates. The format of these coordinates will depend on
the specifics of your program, but they might be something
like (x, y, z) or  [latitude, longitude].</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list or tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.create_circle">
<span class="sig-name descname"><span class="pre">create_circle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">distance_from_head</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pauses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.create_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates circle that the the closes antenna is distance from head
away from the head.</p>
<p>This method creates a circular shape around the head by moving the
antennas backward to a specified distance from the head. The circle
will have a radius equal to the <cite>distance_from_head</cite> parameter in
millimeters.</p>
<p>First, each antenna reaches the head and then moves backward
(diatance_from_head) mm. Second, we find the antenna with the
maximum distance (diatance = current position +
distance_from_head) from the center. Finally, we move every
antenna to the position that matches
the distance found above.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>distance_from_head</strong> (<em>float</em><em>, </em><em>optional</em>) – The radius of the circle.</p></li>
<li><p><strong>1mm.</strong> (<em>Defaults to</em>) – </p></li>
<li><p><strong>pauses</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag indicating whether to pause after</p></li>
<li><p><strong>True.</strong> (<em>each motor movement. Defaults to</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">create_circle</span><span class="p">(</span><span class="n">distance_from_head</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pauses</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">(Circle movement is performed)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The method utilizes the <cite>set_on_head</cite>, <cite>move_backward</cite>,
and <cite>release</cite> methods to create the circle.</p></li>
<li><p>The <cite>set_on_head</cite> method is called initially to position the
antennas on the head.</p></li>
<li><p>The <cite>move_backward</cite> method is used to move each antenna
backward
by a distance equal to the difference
between the target point (calculated based on the maximum
motor position and <cite>distance_from_head</cite>) and the current
motor position.</p></li>
<li><p>The <cite>release</cite> method is called to release the motor after each
backward movement.</p></li>
<li><p>If the target point exceeds the maximum limit (DRIVERS_MAX),
the method creates the circle with the maximum possible
radius by setting the target point to DRIVERS_MAX.</p></li>
<li><p>Pauses after each motor movement can be controlled using the
<cite>pauses</cite> parameter.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.create_ellipse">
<span class="sig-name descname"><span class="pre">create_ellipse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">distance_from_head</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pauses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.create_ellipse" title="Permalink to this definition">¶</a></dt>
<dd><p>This method finds the outer ellipse (around the head) equation
parameters based on the positions of the antennas.</p>
<p>We want every antenna to be INSIDE the ellipse!</p>
<p>It sets the antennas on the head, moves them backward by a specified
distance, and then calculates the outer ellipse parameters using the
<cite>outer_ellipsoid_fit</cite> function. It solves the ellipse equation
system for each antenna to determine the coordinates on the
ellipse. Finally, it optionally plots the ellipse and antenna
positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>distance_from_head</strong> (<em>float</em><em>, </em><em>optional</em>) – Distance from the head to</p></li>
<li><p><strong>(</strong><strong>default</strong> (<em>ellipse and antenna positions</em>) – 1).</p></li>
<li><p><strong>pauses</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag indicating whether to pause after</p></li>
<li><p><strong>(</strong><strong>default</strong> – True).</p></li>
<li><p><strong>plot</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag indicating whether to plot the</p></li>
<li><p><strong>(</strong><strong>default</strong> – True).</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">create_ellipse</span><span class="p">(</span><span class="n">distance_from_head</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                   <span class="n">pauses</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                   <span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The method sets the antennas on the head using the
<cite>set_on_head</cite> method.</p></li>
<li><p>It then moves the antennas backward by the specified distance
using the <cite>move_backward</cite> method.</p></li>
<li><p>If there are only two antenna points, the method exits as it
cannot compute an ellipse from just two points.</p></li>
<li><p>For more than two antenna points, the method calculates the
outer ellipse parameters using <cite>outer_ellipsoid_fit</cite>.</p></li>
<li><p>The ellipse equation system is solved for each antenna using
the <cite>solve_ellipse_system</cite> method.</p></li>
<li><p>The resulting x and y coordinates are stored for each antenna.</p></li>
<li><p>If the distance from the center plus the current motor
position exceeds a threshold, a warning message is printed.</p></li>
<li><p>The antennas are then moved backward to their respective
ellipse positions.</p></li>
<li><p>If the move distance is negative, the method exits with an
error message.</p></li>
<li><p>If the <cite>plot</cite> flag is set to True, the method calls the
<cite>plot_ellipse_antennas</cite> method to visualize the ellipse and
antenna positions.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>SystemExit</strong> – If the number of antenna points is less than 3.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.force_backward">
<span class="sig-name descname"><span class="pre">force_backward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_motor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.force_backward" title="Permalink to this definition">¶</a></dt>
<dd><p>Forces the specified stepper motor to move backward by a certain
distance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_motor</strong> (<em>int</em>) – The index of the stepper motor to be moved.</p></li>
<li><p><strong>distance</strong> (<em>int</em>) – The distance to be moved in millimeters.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The distance is converted to steps before moving the motor.
The motor is released after moving.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.force_forward">
<span class="sig-name descname"><span class="pre">force_forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_motor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.force_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Forces the specified stepper motor to move forward by a certain
distance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_motor</strong> (<em>int</em>) – The index of the stepper motor to be moved.</p></li>
<li><p><strong>distance</strong> (<em>int</em>) – The distance to be moved in millimeters.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The distance is converted to steps before moving the motor.
The motor is released after moving.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_motor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves the specified stepper motor one step forward.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>num_motor</strong> (<em>int</em>) – The index of the stepper motor to be moved.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The new position of the antenna is updated with respect to
the number of steps taken.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.get_angle">
<span class="sig-name descname"><span class="pre">get_angle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor_num</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.get_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the angle corresponding to a specific motor number.</p>
<p>This method takes a motor number as input and returns the
corresponding angle from the <cite>ANGLES</cite> list based on the
<cite>_antenna_number</cite> mapping.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>motor_num</strong> (<em>int</em>) – The motor number.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The angle in degrees.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">get_angle</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">45.0</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.init_motors">
<span class="sig-name descname"><span class="pre">init_motors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pauses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.init_motors" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes motors to HOME position</p>
<p>Initializes each motor in the <cite>_steppers</cite> list by sequentially
moving each motor backward until it touches the switch connected
to the GPIO pin. Afterwards, it moves a few steps forward to
release the switch. Each motor is released after its
initialization, accompanied by a status message of the PIN/switch
state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pauses</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag to decide whether to pause after</p></li>
<li><p><strong>True.</strong> (<em>each motor initialization. Defaults to</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">init_motors</span><span class="p">(</span><span class="n">pauses</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">(Motor initialization process is performed)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method leverages <cite>dist2steps</cite>, <cite>move_switch_off</cite>,
<cite>check_pin</cite>, <cite>new_position</cite>, and <cite>pause</cite> methods to carry out
motor initialization.
It uses the GPIO input to ascertain the switch status. The
initialization involves moving the motor backward until the
switch is activated, and then advancing it to release the
switch. The <cite>pauses</cite> parameter can be utilized to control
pauses after each motor’s initialization. Once the process is
completed, self._init_system is set to True, indicating that the
positions of the motors are now known.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.move_backward">
<span class="sig-name descname"><span class="pre">move_backward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pauses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.move_backward" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves motor backward.</p>
<p>This method moves the specified motor backward (opposite of the
head) for the specified distance in millimeters. If the distance
is larger than the maximum distance that the motor can move (
DRIVERS_MAX), the motor will move until it reaches the switch and
then back off until the switch is released.</p>
<p>If the value of the <cite>motor</cite> parameter is 100, the method moves all
the motors in the <cite>_steppers</cite> list the same distance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>motor</strong> (<em>int</em>) – The motor number or 100 to move all motors.</p></li>
<li><p><strong>distance</strong> (<em>float</em>) – The distance in millimeters to move the</p></li>
<li><p><strong>backward.</strong> (<em>motor</em>) – </p></li>
<li><p><strong>pauses</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag indicating whether to pause</p></li>
<li><p><strong>True.</strong> (<em>after each motor movement. Defaults to</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">move_backward</span><span class="p">(</span><span class="n">motor</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pauses</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">(Motor movement backward is performed)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The method utilizes the <cite>dist2steps</cite>, <cite>move_switch_off</cite>, `
check_pin`, <cite>new_position</cite>, and <cite>pause</cite> methods to perform the
motor movement.</p></li>
<li><p>The method takes into account the maximum distance that the
motor can move (DRIVERS_MAX) and adjusts the distance if it
exceeds this limit.</p></li>
<li><p>The method checks the switch status using the GPIO input to
detect when the motor reaches the switch.</p></li>
<li><p>After each motor movement, the method checks the pin status
using the <cite>check_pin</cite> method.</p></li>
<li><p>The <cite>new_position</cite> method is used to update the motor position
based on the distance, forward_distance, and the current motor
position.</p></li>
<li><p>Pauses after each motor movement can be controlled using the
<cite>pauses</cite> parameter.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.move_forward">
<span class="sig-name descname"><span class="pre">move_forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pauses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.move_forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves motor forward</p>
<p>This method moves the specified motor forward towards the head for
the specified distance in millimeters. If the distance is larger
than the maximum distance that the motor can move (DRIVERS_MAX),
the motor will move until it reaches the end. While moving forward,
if the head is detected (based on the switch status), the motor
will back off until the switch is released.</p>
<p>If the value of the <cite>motor</cite> parameter is 100, the method moves all
the motors in the <cite>_steppers</cite> list the same distance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>motor</strong> (<em>int</em>) – The motor number or 100 to move all motors.</p></li>
<li><p><strong>distance</strong> (<em>float</em>) – The distance in millimeters to move the motor</p></li>
<li><p><strong>forward.</strong> – </p></li>
<li><p><strong>pauses</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag indicating whether to pause after</p></li>
<li><p><strong>True.</strong> (<em>each motor movement. Defaults to</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">move_forward</span><span class="p">(</span><span class="n">motor</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pauses</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">(Motor movement forward is performed)`</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The method utilizes the <cite>dist2steps</cite>, <cite>move_switch_off</cite>,
<cite>check_pin</cite>, <cite>new_position</cite>, and <cite>pause</cite> methods to perform
the motor movement.</p></li>
<li><p>The method takes into account the maximum distance that the
motor can move (DRIVERS_MAX) and adjusts the distance if it
exceeds this limit.</p></li>
<li><p>The method checks the switch status using the GPIO input to
detect the head.</p></li>
<li><p>After each motor movement, the method checks the pin status
using the <cite>check_pin</cite> method.</p></li>
<li><p>The <cite>new_position</cite> method is used to update the motor position
based on the distance and back_distance.</p></li>
<li><p>Pauses after each motor movement can be controlled using the
<cite>pauses</cite> parameter.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.move_switch_off">
<span class="sig-name descname"><span class="pre">move_switch_off</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_motor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forward</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.move_switch_off" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves the switch off by controlling the motor.</p>
<p>This method moves the switch off by controlling the specified motor.
It checks the status of the switch using the GPIO pin. If the
switch is off, it returns the distance traveled in millimeters
based on the number of steps. The motor can be moved forward or
backward depending on the <cite>forward</cite> parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_motor</strong> (<em>StepperMotor</em>) – The stepper motor object to control.</p></li>
<li><p><strong>steps</strong> (<em>int</em><em>, </em><em>optional</em>) – The initial number of steps, defaults to
0.</p></li>
<li><p><strong>forward</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag indicating the direction of</p></li>
<li><p><strong>True.</strong> (<em>verbose output. Defaults to</em>) – </p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Flag indicating whether to print</p></li>
<li><p><strong>True.</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The distance traveled in millimeters in order to release
the switch.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kit</span> <span class="o">=</span> <span class="n">MotorKit</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">motor_ant</span> <span class="o">=</span> <span class="n">kit</span><span class="o">.</span><span class="n">stepper1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">move_switch_off</span><span class="p">(</span><span class="n">motor</span><span class="o">=</span><span class="n">motor_ant</span><span class="p">,</span> <span class="n">forward</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">10</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The method checks the status of the switch using the GPIO pin
<cite>self._pin_switch</cite>.
It uses the <cite>dist2steps</cite> and <cite>steps2dist</cite> functions to convert
between steps and distance.
The <cite>StepperMotor</cite> class should be instantiated and passed as an
argument to control the motor.
The <cite>forward</cite> parameter determines the direction of movement
(forward or backward).</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.new_position">
<span class="sig-name descname"><span class="pre">new_position</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_motor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.new_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the position and coordinates of a motor.</p>
<p>This method updates the position of a motor identified by
<cite>num_motor</cite> with the specified <cite>distance</cite>. It updates the
<cite>_antenna_pos</cite> ON THE DRIVER (0-41) and <cite>_antenna_coords</cite>
dictionaries accordingly, using the <cite>dist2coordinates</cite> function to
calculate the new coordinates based on the distance, angle,
and antenna number.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_motor</strong> (<em>int</em>) – The motor number.</p></li>
<li><p><strong>distance</strong> (<em>int</em>) – The new position for the motor.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">new_position</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">(Position and coordinates of motor 1 are updated)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.pin_status">
<span class="sig-name descname"><span class="pre">pin_status</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.pin_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks and prints the status of a pin switch.</p>
<p>If the pin switch is ON, it prints “switch is ON”.
If the pin switch is OFF, it prints “switch is OFF”.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">pin_status</span><span class="p">()</span>
<span class="go">switch is OFF</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.plot_ellipse_antennas">
<span class="sig-name descname"><span class="pre">plot_ellipse_antennas</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_coordinates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_coordinates</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.plot_ellipse_antennas" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots an ellipse and antennas on a coordinate system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x_coordinates</strong> (<em>list</em>) – The x-coordinates of the ellipse.</p></li>
<li><p><strong>y_coordinates</strong> (<em>list</em>) – The y-coordinates of the ellipse.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coordinates_x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coordinates_y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">plot_ellipse_antennas</span><span class="p">(</span><span class="n">coordinates_x</span><span class="p">,</span> <span class="n">coordinates_y</span><span class="p">)</span>
<span class="go">(Plot is displayed showing the ellipse and antennas)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.release_all">
<span class="sig-name descname"><span class="pre">release_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.release_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Releases all the steppers.</p>
<p>This method releases all the stepper motors associated with the
instance of the class.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">release_all</span><span class="p">()</span>
<span class="go">(All steppers are released)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.set_on_head">
<span class="sig-name descname"><span class="pre">set_on_head</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pauses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.set_on_head" title="Permalink to this definition">¶</a></dt>
<dd><p>Moves each motor until it touches the head</p>
<p>Moves each motor in the <cite>_steppers</cite> list forward until it touches the head by
repeatedly making forward steps. Once the switch connected to the GPIO pin is
activated, the motor takes a few steps backward to release the switch.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pauses</strong> (<em>bool</em><em>, </em><em>optional</em>) – A flag determining whether to pause after each</p></li>
<li><p><strong>True.</strong> (<em>motor movement. Defaults to</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">set_on_head</span><span class="p">(</span><span class="n">pauses</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">(Each motor in the list moves to touch the head)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method employs the <cite>dist2steps</cite>, <cite>move_switch_off</cite>, <cite>check_pin</cite>,
<cite>new_position</cite>, and <cite>pause</cite> methods to implement the motor movement. It
uses the GPIO input to check the switch status. The movement process
entails advancing the motor until the switch is pressed, followed by a
backward movement to release the switch. After this process, the position
of each motor is updated. The <cite>pauses</cite> parameter can be used to manage
pauses after each motor movement.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.show_antennas">
<span class="sig-name descname"><span class="pre">show_antennas</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.show_antennas" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays the positions of antennas on a coordinate system.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">show_antennas</span><span class="p">()</span>
<span class="go">(Plot is displayed showing the positions of antennas)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="motor_control.MotorControl.solve_ellipse_system">
<span class="sig-name descname"><span class="pre">solve_ellipse_system</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centroid_x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centroid_y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_motor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#motor_control.MotorControl.solve_ellipse_system" title="Permalink to this definition">¶</a></dt>
<dd><p>Solves the ellipse equation system and calculates the coordinates
and distance for a given antenna.</p>
<p>This method formulates and solves the ellipse equation system based
on the provided parameters: <cite>a</cite>, <cite>b</cite>, <cite>c</cite>, <cite>centroid_x</cite>,
<cite>centroid_y</cite>,
and <cite>num_motor</cite>. It calculates the coordinates (x, y) and the
distance from the center for the specified antenna.</p>
<p>First, we construct the ellipse’s and driver’s equation.
After that, we want to find the x, y possible solutions of the 2x2
system. We expect two solutions. We keep the correct solution based
on the antenna number.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>float</em>) – Coefficient of the ellipse equation.</p></li>
<li><p><strong>b</strong> (<em>float</em>) – Coefficient of the ellipse equation.</p></li>
<li><p><strong>c</strong> (<em>float</em>) – Coefficient of ellipse equation.</p></li>
<li><p><strong>centroid_x</strong> (<em>float</em>) – X-coordinate of the centroid of the ellipse.</p></li>
<li><p><strong>centroid_y</strong> (<em>float</em>) – Y-coordinate of the centroid of the ellipse.</p></li>
<li><p><strong>num_motor</strong> (<em>int</em>) – Antenna number for which to solve the ellipse</p></li>
<li><p><strong>system.</strong> (<em>equation</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple containing the calculated x-coordinate,
y-coordinate, and distance from the center.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">MotorControl</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">solve_ellipse_system</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">1.8</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mf">1.2</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                  <span class="n">centroid_x</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                  <span class="n">centroid_y</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                  <span class="n">num_motor</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="go">(2, 0, 2.5)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The method calculates the ellipse equation using the provided
coefficients and centroid coordinates.</p></li>
<li><p>It also calculates the driver equation based on the antenna
angle obtained from the <cite>get_angle</cite> method.</p></li>
<li><p>The equation system is solved using the <cite>solve</cite> function from
<cite>sympy</cite>.</p></li>
<li><p>The resulting solutions are rounded and used to determine the
x and y coordinates of the ellipse intersection.</p></li>
<li><p>The specific x and y values are assigned based on the antenna
number.</p></li>
<li><p>The distance from the center is calculated by subtracting the
inner distance (obtained from <cite>INNER_DIST</cite>)
from the Euclidean distance between the x and y coordinates.</p></li>
</ul>
</div>
</dd></dl>

</dd></dl>

<span class="target" id="module-util"></span><dl class="py function">
<dt class="sig sig-object py" id="util.dist2coordinates">
<span class="sig-prename descclassname"><span class="pre">util.</span></span><span class="sig-name descname"><span class="pre">dist2coordinates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">distance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#util.dist2coordinates" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the antenna position to x,y coordinates of the motor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>distance</strong> (<em>float</em>) – The linear distance over the Driver.</p></li>
<li><p><strong>angle</strong> (<em>float</em>) – The angle in degrees.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The x,y coordinates of the motor.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dist2coordinates</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">45.0</span><span class="p">)</span>
<span class="go">(9.142135623730951, 9.142135623730951)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We must add INNER_DIST to the distance, in order to get the real
distance from the origin.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="util.dist2steps">
<span class="sig-prename descclassname"><span class="pre">util.</span></span><span class="sig-name descname"><span class="pre">dist2steps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">distance</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#util.dist2steps" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts distance (in mm ) to the equivalent number of motor steps.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>distance</strong> (<em>float</em>) – The distance in mm.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The number of steps.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dist2steps</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">250</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>one full rotation (360deg.) of the motor corresponds to 200 steps
(1.8deg./step) which (for this lead screw) corresponds to 8mm linear
distance</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="util.outer_ellipsoid_fit">
<span class="sig-prename descclassname"><span class="pre">util.</span></span><span class="sig-name descname"><span class="pre">outer_ellipsoid_fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#util.outer_ellipsoid_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the minimum volume ellipsoid enclosing a set of points.</p>
<p>This function computes the minimum volume ellipsoid that encloses
(lies outside) a set of points in a d-dimensional space. It returns the
matrix A and vector c, which represent the ellipsoid in “center form”
where the equation for the ellipse is (x - c).T * A * (x - c) = 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>points</strong> (<em>numpy.ndarray</em>) – An N x d matrix representing N points in</p></li>
<li><p><strong>space.</strong> (<em>d-dimensional</em>) – </p></li>
<li><p><strong>tol</strong> (<em>float</em>) – Tolerance parameter for convergence of the algorithm.</p></li>
<li><p><strong>0.001.</strong> (<em>Default is</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple (A, c) where A is a d x d matrix representing the
ellipsoid parameters and c is a d-dimensional vector representing
the center of the ellipsoid.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A_matrix</span><span class="p">,</span> <span class="n">center</span> <span class="o">=</span> <span class="n">outer_ellipsoid_fit</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">A_matrix</span><span class="p">)</span>
<span class="go">[[ 0.02918387 -0.00832836  0.01243388]</span>
<span class="go"> [-0.00832836  0.03522328  0.01911765]</span>
<span class="go"> [ 0.01243388  0.01911765  0.04626111]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>
<span class="go">[4. 5. 6.]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="util.pause">
<span class="sig-prename descclassname"><span class="pre">util.</span></span><span class="sig-name descname"><span class="pre">pause</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#util.pause" title="Permalink to this definition">¶</a></dt>
<dd><p>Pauses the program and waits for user input to continue.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pause</span><span class="p">()</span>
<span class="go">&gt; Press Enter to continue...</span>
<span class="go">(User presses Enter key)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="util.steps2dist">
<span class="sig-prename descclassname"><span class="pre">util.</span></span><span class="sig-name descname"><span class="pre">steps2dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">steps</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#util.steps2dist" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts motor steps to linear distance (mm)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>steps</strong> (<em>int</em>) – The number of motor steps.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The distance in mm.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">steps2dist</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="go">20</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="module-vna_control"></span><dl class="py class">
<dt class="sig sig-object py" id="vna_control.RSVNA">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vna_control.</span></span><span class="sig-name descname"><span class="pre">RSVNA</span></span><a class="headerlink" href="#vna_control.RSVNA" title="Permalink to this definition">¶</a></dt>
<dd><p>Remote control for the Rohde &amp; Schwarz VNA.</p>
<p>Object to communicate with the VNA either through the LAN or USB. To
connect through the LAN interface, make sure that the instrument and the
PC are connected to the same network. The instrument’s IP address is
displayed in the front panel. For USB connection, just plug the USB cable
in the rear port of the instrument, marked as ‘USB Device’.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="vna_control.RSVNA.freq_points">
<span class="sig-name descname"><span class="pre">freq_points</span></span><a class="headerlink" href="#vna_control.RSVNA.freq_points" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of frequency points for
S-parameters acquisition. Default is 201.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vna_control.RSVNA.freq_min">
<span class="sig-name descname"><span class="pre">freq_min</span></span><a class="headerlink" href="#vna_control.RSVNA.freq_min" title="Permalink to this definition">¶</a></dt>
<dd><p>Starting frequency for the sweep in GHz.
Default is 0.5.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vna_control.RSVNA.freq_max">
<span class="sig-name descname"><span class="pre">freq_max</span></span><a class="headerlink" href="#vna_control.RSVNA.freq_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Stopping frequency for the sweep in GHz.
Default is 3.0.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="vna_control.RSVNA.averaging">
<span class="sig-name descname"><span class="pre">averaging</span></span><a class="headerlink" href="#vna_control.RSVNA.averaging" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of sweeps for the averaging. Set to
None to disable averaging. Default is 10.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vna_control.RSVNA.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">link</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'usb'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vna_control.RSVNA.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to the instrument.</p>
<p>You have to connect to the instrument first to send and receive data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>link</strong> (<em>str</em><em>, </em><em>optional</em>) – Which interface to use. Possible values are</p></li>
<li><p><strong>'usb'</strong> – </p></li>
<li><p><strong>'usb'.</strong> (<em>'lan'</em><em> or </em><em>'hislip'. Defaults to</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the link argument has the wrong value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vna_control.RSVNA.disconnect">
<span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#vna_control.RSVNA.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Disconnects from the VNA (only if it is already connected)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="vna_control.RSVNA.ip_address">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ip_address</span></span><a class="headerlink" href="#vna_control.RSVNA.ip_address" title="Permalink to this definition">¶</a></dt>
<dd><p>IP address of the instrument. Should be set before trying to
connect.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vna_control.RSVNA.setup">
<span class="sig-name descname"><span class="pre">setup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_channels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vna_control.RSVNA.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup for VNA for measurement.</p>
<p>It will split the screen and add traces. For more than 3 antennas,
there will be three panels, one with the reflection , one with
neighboring and the third with the rest of the S-parameters. Also
parameters regarding the sweeps are passed to the VNA (minimum and
maximum frequency, number of frequnecy points, etc). For less than
three antennas, less than three panesl are set</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>num_channels</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of channesl. Defaults to 8.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>RuntimeError</strong> – If you are connected to the VNA.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vna_control.RSVNA.setup_user_interface">
<span class="sig-name descname"><span class="pre">setup_user_interface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buttons</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#vna_control.RSVNA.setup_user_interface" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup the VNA user interface (on the VNA monitor).</p>
<p>When you connect remotely to the VNA, the usual user interface is
disabled and the VNA only accepts remote commands. On the interface
shown in the VNA monitor there are still 8 buttons can trigger
some functionality in the connected PC. Every time the  user pushes
the button the present class executes the requested function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>buttons</strong> (<em>dict</em>) – A dictionary of function handlers. The key of the
dictionary will be displayed on the VNA button. Note that the
function should not accept any arguments.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If you are dictionary has the wrong format or length.</p></li>
<li><p><strong>RuntimeError</strong> – If you are connected to the VNA.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Motor Control</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Motor Control Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#motor_control.MotorControl"><code class="docutils literal notranslate"><span class="pre">MotorControl</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#util.dist2coordinates"><code class="docutils literal notranslate"><span class="pre">dist2coordinates()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#util.dist2steps"><code class="docutils literal notranslate"><span class="pre">dist2steps()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#util.outer_ellipsoid_fit"><code class="docutils literal notranslate"><span class="pre">outer_ellipsoid_fit()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#util.pause"><code class="docutils literal notranslate"><span class="pre">pause()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#util.steps2dist"><code class="docutils literal notranslate"><span class="pre">steps2dist()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#vna_control.RSVNA"><code class="docutils literal notranslate"><span class="pre">RSVNA</span></code></a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Motor Control’s Documentation!</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Philippos Orfanoudakis.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/code.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>